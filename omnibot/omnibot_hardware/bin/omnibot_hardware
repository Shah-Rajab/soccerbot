#! /usr/bin/env python

import omnibot_communication.omnibot_hardware

if __name__ == "__main__":
    sh = omnibot_hardware()
    sh.connectToEmbedded()

    if(sh.isROSmode == True):
        rospy.init_node('omnibot_hardware', anonymous=True)
        rospy.Subscriber("/omnibot/cmd_vel", Twist, sh.cmd_callback, queue_size=1)
        #pub = rospy.Publisher('omnibot/imu', Imu, queue_size=1)
        #pub2 = rospy.Publisher('omnibot/robotState', RobotState, queue_size=1)
        rospy.spin()
    else:
        sh.loopTrajectory()

    sys.exit(0)
